import{b as u,t as _}from "../chunks/disclose-version.DG_wKHNx.js";import{w as Y,I as i,B as Z,y as tt,J as s,K as e,L as t,M as y,N as J,O as q,$ as et,P as z}from "../chunks/runtime.CRzpIxTj.js";import{s as m}from "../chunks/render.GGGqqLGV.js";import{s as at,a as L,i as st,b as Q,p as rt}from "../chunks/props.BhccrgCE.js";import{a as ot,e as S,i as W,R as D,C as lt,b as T,c as it,r as K,d as nt,f as dt,P as pt,g as V,p as vt,h as X,j as ct}from "../chunks/Plinko.TQHBosXl.js";import{d as bt,c as ut}from "../chunks/svelte-head.C6Z01pUe.js";var _t=_('<th class="px-2 py-1 text-left"> </th>'),xt=_('<td class="w-20 px-2 py-1 tabular-nums"> </td>'),yt=_('<tr><td class="px-2 py-1"> </td><td class="px-2 py-1 tabular-nums"> </td><td class="px-2 py-1 tabular-nums"> </td></tr>'),mt=_('<h2 class="mb-3 text-xl font-semibold">Bins Distribution</h2> <div class="h-[400px] w-[800px]"><canvas></canvas></div> <table class="my-4 text-xs"><thead><tr></tr></thead><tbody><tr></tr></tbody></table> <table class="my-4 text-sm"><thead><tr><th class="px-2 py-1 text-left">Risk</th><th class="px-2 py-1 text-left">Expected value</th><th class="px-2 py-1 text-left">Actual value</th></tr></thead><tbody></tbody></table>',1);function ft(I, c){Y(c,!0);const x=at(),C=()=>L(it,"$binProbabilities",x),$=()=>L(K,"$rowCount",x);let G=J(()=>Object.keys(C())),g=J(()=>Object.values(C()).map(o=>o*100)),E=J(()=>T[$()].map(o=>o*100));const O=(o, n, r)=>nt(dt[o][n],r),P=(o, {labels:n,binProbabilities:r,expectedProbabilities:d})=>{const b=new lt(o,{type:"bar",data:{labels:n,datasets:[{label:"Bin Probability",data:r},{label:"Expected Probability",data:d}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Bin Number"}},y:{title:{display:!0,text:"Probability (%)"}}},plugins:{tooltip:{callbacks:{label: p=>`${p.dataset.label}: ${p.parsed.y.toFixed(4)}%`}}}}});return{update:({labels:p,binProbabilities:F,expectedProbabilities:a})=>{b.data.labels=p,b.data.datasets[0].data=F,b.data.datasets[1].data=a,b.update()},destroy:()=>{b.destroy()}}};var k=mt(),R=i(Z(k),2),M=s(R);ot(M,(o, n)=>P==null?void 0:P(o,n),()=>({labels:e(G),binProbabilities:e(g),expectedProbabilities:e(E)})),t(R);var f=i(R,2),h=s(f),w=s(h);S(w,21,()=>e(G),W,(o, n)=>{var r=_t(),d=s(r,!0);t(r),y(()=>m(d,e(n))),u(o,r)}),t(w),t(h);var B=i(h),N=s(B);S(N,21,()=>e(g),W,(o, n)=>{var r=xt(),d=s(r);y(()=>m(d,`${e(n).toFixed(4)??""}%`)),t(r),u(o,r)}),t(N),t(B),t(f);var j=i(f,2),A=i(s(j));S(A,21,()=>[D.LOW,D.MEDIUM,D.HIGH],W,(o, n)=>{var r=yt(),d=s(r),b=s(d,!0);t(d);var p=i(d),F=s(p,!0);y(()=>m(F,O($(),e(n),T[$()]).toFixed(5))),t(p);var a=i(p),l=s(a,!0);y(()=>m(l,O($(),e(n),Object.values(C())).toFixed(5))),t(a),t(r),y(()=>m(b,e(n))),u(o,r)}),t(A),t(j),u(I,k),tt()}function ht(I, c, x){q(c,rt(setInterval(x,10)))}function $t(I, c){e(c)&&(clearInterval(e(c)),q(c,null))}var gt=_("<option> </option>"),Pt=_("<option> </option>"),kt=_('<button class="bg-cyan-100 p-2">Start Auto Drop</button>'),wt=_('<button class="bg-cyan-100 p-2">Stop Auto Drop</button>'),Bt=_('<div class="h-[570px] w-[760px]"><!></div> <div class="mx-4 my-8 flex items-center gap-16"><div class="flex items-center gap-4"><label for="rowCount">Rows</label> <select id="rowCount" class="border border-gray-400 p-2"></select></div> <div class="flex items-center gap-4"><label for="riskLevel">Risk</label> <select id="riskLevel" class="border border-gray-400 p-2"></select></div> <button class="bg-cyan-100 p-2">Drop Ball</button> <!> <p>Dropped: <span> </span></p></div> <div class="mx-4 my-8"><!></div>',1);function Mt(I, c){Y(c,!0);const x=at(),C=()=>L(vt,"$plinkoEngine",x),$=()=>L(K,"$rowCount",x),G=()=>L(X,"$riskLevel",x);let g=z(null),E=z(0);function O(){var a;(a=C())==null||a.dropBall(),q(E,e(E)+1)}var P=Bt();ut(a=>{et.title="Plinko - Benchmark"});var k=Z(P),R=s(k);pt(R,{}),t(k);var M=i(k,2),f=s(M),h=i(s(f),2);S(h,21,()=>ct,W,(a, l)=>{var v=gt(),H={},U=s(v,!0);t(v),y(()=>{H!==(H=e(l))&&(v.value=(v.__value=e(l))==null?"":e(l)),m(U,e(l))}),u(a,v)}),t(h),t(f);var w=i(f,2),B=i(s(w),2);S(B,21,()=>[D.LOW,D.MEDIUM,D.HIGH],W,(a, l)=>{var v=Pt(),H={},U=s(v,!0);t(v),y(()=>{H!==(H=e(l))&&(v.value=(v.__value=e(l))==null?"":e(l)),m(U,e(l))}),u(a,v)}),t(B),t(w);var j=i(w,2);j.__click=O;var A=i(j,2);{var o= a=>{var l=kt();l.__click=[ht,g,O],u(a,l)},n= a=>{var l=wt();l.__click=[$t,g],u(a,l)};st(A, a=>{e(g)===null?a(o):a(n,!1)})}var r=i(A,2),d=i(s(r)),b=s(d,!0);t(d),t(r),t(M);var p=i(M,2),F=s(p);ft(F,{}),t(p),y(()=>m(b,e(E))),V(h,$, a=>Q(K,a)),V(B,G, a=>Q(X,a)),u(I,P),tt()}bt(["click"]);export{Mt as component};
